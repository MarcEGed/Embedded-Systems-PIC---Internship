#include <18F46K22.h>
#fuses INTRC_IO, NOWDT, NOLVP, NOPROTECT
#use delay(clock=16MHz)
#use rs232(baud=9600, xmit=PIN_C6, rcv=PIN_C7)

#include "vec2.h"
#include "joystick.h"
#include "display.h"
#include "controller.h"
#include "entities.h"

void main() {
    display_init();
    controller_init();

    //Player p = {'p', {80, 50}};
    Enemy e1 = {'e', {0, 0}, 1};
    Enemy e2 = {'e', {0, 20}, 1};
    Enemy e3 = {'e', {0, 40}, 1};
    Enemy e4 = {'e', {50, 0}, 1};
    Enemy e5 = {'e', {50, 20}, 1};
    Enemy e6 = {'e', {50, 40}, 1};

    display_draw_enemy(e1.pos);
    display_draw_enemy(e2.pos);
    display_draw_enemy(e3.pos);
    display_draw_enemy(e4.pos);
    display_draw_enemy(e5.pos);
    display_draw_enemy(e6.pos);

    while (TRUE){
        //display_clear_entity(p.pos, 8, 8);
        //controller_update(&p.pos);display_draw_enemy(e3);

        e1 = display_move_enemy(e1);
        e2 = display_move_enemy(e2);
        e3 = display_move_enemy(e3);
        e4 = display_move_enemy(e4);
        e5 = display_move_enemy(e5);
        e6 = display_move_enemy(e6);

        delay_ms(100);

    }
}
