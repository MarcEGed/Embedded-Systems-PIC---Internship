#include <18F46K22.h>
#fuses INTRC_IO, NOWDT, NOLVP, NOPROTECT
#use delay(clock=16MHz)
#use rs232(baud=9600, xmit=PIN_C6, rcv=PIN_C7)

#include "sh1106.h"
#include "display.h"
#include "font.h"

void draw_sprite(const unsigned int8 *sprite, int w, int h, int x, int y){
   for (int row = 0; row < h; row++){
      unsigned int8 line = sprite[row];
      for (int col = 0; col < width; col++){
         if (line & (1 << (width - 1 - col))){
            sh1106_draw_pixel(x+col, y+row, 1);
         }
      }
   }
}


void main() {
   const uint8_t alien_sprite[5] = {
   0b01110,
   0b10101,
   0b11111,
   0b01010,
   0b10001
   };

   display_init();
   display_clear();

   draw_sprite(alien, 5, 5, 30, 20);  // Draw alien at x=30, y=20
   display_update();

   while(TRUE);
}
